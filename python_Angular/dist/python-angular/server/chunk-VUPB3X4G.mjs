import './polyfills.server.mjs';
import{B as I,D as T,E as V,F as O,G as k,H as M,I as L,L as j,R as A,a as b,b as w,c as _,d as p,e as d,f as l,g as E,h as F,i as c,j as U,k as o,l as n,m as S,n as h,o as m,p as u,q as D,r as a,s as v,t as y,u as x}from"./chunk-VCSQRLT5.mjs";var P=(()=>{class t{constructor(e){this.http=e,this.apiUrl="https://data-processor-api-aeuh.onrender.com/api"}uploadFile(e){let i=new FormData;return i.append("file",e),this.http.post(`${this.apiUrl}/upload`,i)}downloadFile(e){return this.http.get(`${this.apiUrl}/download/${e}`,{responseType:"blob"})}getStatus(){return this.http.get(`${this.apiUrl}/status`)}static{this.\u0275fac=function(i){return new(i||t)(w(O))}}static{this.\u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function J(t,C){t&1&&(o(0,"span"),a(1,"\u23F3"),n())}function X(t,C){if(t&1){let e=h();o(0,"div",16)(1,"p")(2,"strong"),a(3,"Fichier s\xE9lectionn\xE9:"),n(),a(4),n(),o(5,"button",17),m("click",function(){p(e);let r=u();return d(r.uploadFile())}),F(6,J,2,0,"span",18),a(7),n()()}if(t&2){let e=u();l(4),v(" ",e.selectedFile.name,""),l(),c("disabled",e.isUploading),l(),c("ngIf",e.isUploading),l(),v(" ",e.isUploading?"Traitement...":"Traiter le fichier"," ")}}function B(t,C){if(t&1){let e=h();o(0,"div",19)(1,"h5"),a(2),n(),o(3,"p"),a(4),n(),o(5,"button",20),m("click",function(){p(e);let r=u();return d(r.downloadFile())}),a(6," T\xE9l\xE9charger le fichier trait\xE9 "),n()()}if(t&2){let e=u();l(2),v("\u2705 ",e.result.message,""),l(2),y("Lignes: ",e.result.rows," | Colonnes: ",e.result.columns,"")}}function K(t,C){if(t&1&&(o(0,"div",21)(1,"strong"),a(2,"Erreur:"),n(),a(3),n()),t&2){let e=u();l(3),v(" ",e.error," ")}}var $=(()=>{class t{constructor(e){this.dataService=e,this.selectedFile=null,this.isUploading=!1,this.isDragOver=!1,this.result=null,this.error=""}onDragOver(e){e.preventDefault(),this.isDragOver=!0}onDragLeave(e){e.preventDefault(),this.isDragOver=!1}onDrop(e){e.preventDefault(),this.isDragOver=!1;let i=e.dataTransfer?.files;i&&i.length>0&&(this.selectedFile=i[0])}onFileSelected(e){this.selectedFile=e.target.files[0]}uploadFile(){this.selectedFile&&(this.isUploading=!0,this.error="",this.result=null,this.dataService.uploadFile(this.selectedFile).subscribe({next:e=>{this.result=e,this.isUploading=!1},error:e=>{this.error=e.error?.error||"Erreur lors du traitement",this.isUploading=!1}}))}downloadFile(){this.result?.processed_file&&this.dataService.downloadFile(this.result.processed_file).subscribe({next:e=>{let i=window.URL.createObjectURL(e),r=document.createElement("a");r.href=i,r.download=this.result.processed_file,r.click(),window.URL.revokeObjectURL(i)}})}static{this.\u0275fac=function(i){return new(i||t)(E(P))}}static{this.\u0275cmp=_({type:t,selectors:[["app-file-upload"]],standalone:!0,features:[x],decls:23,vars:5,consts:[["fileInput",""],[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-8"],[1,"card"],[1,"card-header"],[1,"text-center"],[1,"card-body"],[1,"upload-area",3,"dragover","dragleave","drop"],["type","file","accept","*",2,"display","none",3,"change"],[1,"mb-3"],[1,"btn","btn-primary",3,"click"],[1,"mt-2","text-muted"],["class","mt-3",4,"ngIf"],["class","mt-3 alert alert-success",4,"ngIf"],["class","mt-3 alert alert-danger",4,"ngIf"],[1,"mt-3"],[1,"btn","btn-success",3,"click","disabled"],[4,"ngIf"],[1,"mt-3","alert","alert-success"],[1,"btn","btn-outline-success",3,"click"],[1,"mt-3","alert","alert-danger"]],template:function(i,r){if(i&1){let f=h();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h3",6),a(6,"Traitement Automatique des Donn\xE9es"),n()(),o(7,"div",7)(8,"div",8),m("dragover",function(s){return p(f),d(r.onDragOver(s))})("dragleave",function(s){return p(f),d(r.onDragLeave(s))})("drop",function(s){return p(f),d(r.onDrop(s))}),o(9,"input",9,0),m("change",function(s){return p(f),d(r.onFileSelected(s))}),n(),o(11,"div",6)(12,"div",10),a(13,"\u{1F4C1}"),n(),o(14,"p"),a(15,"Glissez-d\xE9posez votre fichier ici ou"),n(),o(16,"button",11),m("click",function(){p(f);let s=D(10);return d(s.click())}),a(17," S\xE9lectionner un fichier "),n(),o(18,"p",12),a(19,"Formats support\xE9s: CSV, Excel, JSON, XML"),n()()(),F(20,X,8,4,"div",13)(21,B,7,3,"div",14)(22,K,4,1,"div",15),n()()()()()}i&2&&(l(8),U("drag-over",r.isDragOver),l(12),c("ngIf",r.selectedFile),l(),c("ngIf",r.result),l(),c("ngIf",r.error))},dependencies:[V,T],styles:[".upload-area[_ngcontent-%COMP%]{border:2px dashed #ccc;border-radius:10px;padding:40px;text-align:center;cursor:pointer;transition:all .3s ease}.upload-area[_ngcontent-%COMP%]:hover, .upload-area.drag-over[_ngcontent-%COMP%]{border-color:#007bff;background-color:#f8f9fa}.card[_ngcontent-%COMP%]{box-shadow:0 4px 6px #0000001a}"]})}}return t})();var H=(()=>{class t{constructor(){this.title="python_Angular"}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=_({type:t,selectors:[["app-root"]],standalone:!0,features:[x],decls:1,vars:0,template:function(i,r){i&1&&S(0,"app-file-upload")},dependencies:[$]})}}return t})();var z=[];var N={providers:[A(z),L(),k()]};var Q={providers:[j()]},q=I(N,Q);var W=()=>M(H,q),_e=W;export{_e as a};
